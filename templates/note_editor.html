{% extends 'base.html' %}
{% block title %}Note Editor{% endblock %}

{% block quote %}{% endblock %}
{% block body %}
    {% if note_mode == "create" %}
    <h2>Create a Note</h2>
    <form action="/create-note" method="POST" enctype="multipart/form-data">
        <p>
            Title<br/>
            <input type='text' name="title">
        </p>
        <p id="note-body">
            Body<br/>
            <textarea type="text" name="body" id="text-body" style="height: 450px; width: 450px"></textarea>
        </p>
        <p>
            <button id="image-note-btn">Upload Image as Note</button>
            <button id="image-attachment-btn">Attach Image to Note</button>
        </p>
        <p>
            <input type="submit" value="Save">
        </p>
    </form>
    <form action="/cancel">
        <input type="submit" value="Cancel">
    </form>
    {% endif %}

    {% if note_mode == "edit" %}
    <h2>Edit Note</h2>
    <form action="/edit-note/{{ note.note_id }}" method="POST" enctype="multipart/form-data">
        <p>
            Title<br/>
            <input type='text' name="title" value="{{ note.title }}">
        </p>
        <p id="note-body">
            Body<br/>
            {% if "/digitalbraindump/image/upload/" in note.body %}
                <img src="{{ note.body}}"></img>
            {% else %}
            <textarea type="text" name="body" id="text-body" style="height: 450px; width: 450px">{{ note.body }}</textarea>
            {% endif %}    
        </p>
        {% if note.image %}
        <img src="{{ note.image }}"></img>
        {% endif %}
        <p>
            <button id="image-note-btn">Upload Image as Note</button>
            <button id="image-attachment-btn">Attach Image to Note</button>
        </p>
        <p>
            <input type="submit" value="Save">
        </p>
    </form>
    <form action="/notes/{{ note.note_id }}">
        <input type="submit" value="Cancel">
    </form>
    {% endif %}
{% endblock %}

{% block js %}
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script src="/static/js/note_upload.js"></script>
{% endblock %}
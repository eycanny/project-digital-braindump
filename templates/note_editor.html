{% extends 'base.html' %}
{% block title %}Note Editor{% endblock %}

{% block quote %}{% endblock %}
{% block body %}
    <h2>Edit Note</h2>
    <form action="/save-note/{{ note.note_id }}" method="POST" enctype="multipart/form-data">
        <p>
            Title<br/>
            <input type='text' name="title" value="{{ note.title }}">
        </p>

        <p id="note-body">
            Body<br/>
            {% if "/digitalbraindump/image/upload/" in note.body %}
                <img src="{{ note.body}}"></img>
            {% elif not note.body %}
            <textarea type="text" name="body" id="text-body" style="height: 450px; width: 450px">(No Body)</textarea>
            {% else %}
            <textarea type="text" name="body" id="text-body" style="height: 450px; width: 450px">{{ note.body }}</textarea>
            {% endif %}    
        </p>

        <p id="image-note-upload"></p>

        {% if note.image %}
        <p>Image Attachment</p>
        <img src="{{ note.image }}"></img>
        {% endif %}

        <p id="image-attachment-upload"></p>
        <p>
            <button id="clear-body-btn">Clear Body of Note</button>
            <button id="image-note-btn">Upload Image as Note</button>
            <button id="image-attachment-btn">Attach Image to Note</button>
        </p>
        <p>
            <input type="submit" value="Save">
        </p>
    </form>
    <form action="/view-note/{{ note.note_id }}">
        <input type="submit" value="Cancel">
    </form>
{% endblock %}

{% block js %}
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script src="/static/js/image_upload.js"></script>
    <script src="/static/js/clear_note_body.js"></script>
{% endblock %}